Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1 Регистратор ИЗ РегистрНакопления.Остаточный");
Выб = Запрос.Выполнить().Выбрать(); Выб.Следующий();
// в одном окне выполнить Транзакцию 1, во втором окне Транзакцию 2
// теперь блокировка будет, т.к. пространства блокировки одинаковые и значения полей блокировки одинаковые
// проверить в ТЖ, что пространства и поля блокировки совпадают
// использовать ТЖ с событием TLock, TTimeout для расследования

// Транзакция 1
НачатьТранзакцию();

	// читаем набор записей, платформа неявно установит
	// РАЗДЕЛЯЕМУЮ упр. блокировку по пространству
	// _AccumRg16.RECORDER (РегистрНакопления.Остаточный.НаборЗаписей)
	Набор = РегистрыНакопления.Остаточный.СоздатьНаборЗаписей();
	Набор.Отбор.Регистратор.Установить(Выб.Регистратор);
	Набор.Прочитать();
	Предупреждение("Транзакция 1: Прочитан набор записей");

ОтменитьТранзакцию();

// Транзакция 2
НачатьТранзакцию();
	
	// записываем набор записей, платформа неявно установит
	// ИСКЛЮЧИТЕЛЬНУЮ упр. блокировку по пространству
	// _AccumRg16.RECORDER (РегистрНакопления.Остаточный.НаборЗаписей)
	Набор = РегистрыНакопления.Остаточный.СоздатьНаборЗаписей();
	Набор.Отбор.Регистратор.Установить(Выб.Регистратор);
	Набор.Записать();
	Предупреждение("Транзакция 2: Записан набор записей");

ОтменитьТранзакцию(); 
