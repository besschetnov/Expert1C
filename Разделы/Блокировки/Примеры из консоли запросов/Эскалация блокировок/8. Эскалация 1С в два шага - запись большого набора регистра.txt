Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 2 Ссылка, Дата ИЗ Документ.БезТабличныхЧастей ГДЕ НЕ Проведен И НЕ ПометкаУдаления");
Выб = Запрос.Выполнить().Выбрать(); 
// выполнять в управляемом режиме
// в примере ниже эскалация наступит при 100 тыс записей (8.3, в т.ч. совместимость с 8.2) или 20 тыс записей (8.2)
// перед окончанием данной транзакции попробовать провести любой другой "Документ.БезТабличныхЧастей",
// либо отменить проведение любого документа "Документ.БезТабличныхЧастей",
// либо установить упр блокировку на любую единичную запись
// включить ТЖ с событием TLock, посмотреть, при каком числе записей будет эскалация

НачатьТранзакцию();
	
	// РегистрНакопления.Остаточный 
	Выб.Следующий();
	Набор = РегистрыНакопления.Остаточный.СоздатьНаборЗаписей();
	Набор.Отбор.Регистратор.Установить(Выб.Ссылка);
	
	Для Инд = 1 По 50000 Цикл
		Стр = Набор.Добавить(); 
		Стр.Регистратор = Выб.Ссылка; 
		Стр.Период = Выб.Дата; 
		Стр.Склад = Справочники.Склады.Оптовый;
		Стр.НомерЯчейки = Инд; 
		Стр.Количество = 1;
	КонецЦикла;	
	
	Набор.Записать(Ложь); 
	
	Предупреждение("Записали набор РегистрНакопления.Остаточный (1)");
	
	// РегистрНакопления.Остаточный 
	Выб.Следующий();
	Набор = РегистрыНакопления.Остаточный.СоздатьНаборЗаписей();
	Набор.Отбор.Регистратор.Установить(Выб.Ссылка);
	
	Для Инд = 50001 По 100001 Цикл
		Стр = Набор.Добавить(); 
		Стр.Регистратор = Выб.Ссылка; 
		Стр.Период = Выб.Дата; 
		Стр.Склад = Справочники.Склады.Оптовый;
		Стр.НомерЯчейки = Инд; 
		Стр.Количество = 1;
	КонецЦикла;	
	
	Набор.Записать(Ложь); 
	
	Предупреждение("Записали набор РегистрНакопления.Остаточный (2)");
	
ОтменитьТранзакцию();
