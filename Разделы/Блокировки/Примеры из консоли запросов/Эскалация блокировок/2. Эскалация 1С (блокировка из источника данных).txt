// в 8.3 (в т.ч. в совместимости с 8.2) эскалация наступает при 100 тыс + 1 записей
// в 8.2 эскалация наступает при 20 тыс + 1 записей
// включить ТЖ с событием TLock, посмотреть, при каком числе записей будет эскалация
ИсточникБлокировки = Новый ТаблицаЗначений;
ИсточникБлокировки.Колонки.Добавить("Склад", Новый ОписаниеТипов("СправочникСсылка.Склады"));
ИсточникБлокировки.Колонки.Добавить("НомерЯчейки", Новый ОписаниеТипов("Число"));

Для Инд = 1 По 100001 Цикл
	Стр = ИсточникБлокировки.Добавить();
	Стр.Склад = Справочники.Склады.Оптовый;
	Стр.НомерЯчейки = Инд;
КонецЦикла;	

НачатьТранзакцию();
	
	Блок = Новый БлокировкаДанных;
	
	ЭлемБлокировки = Блок.Добавить("РегистрНакопления.Остаточный");
	ЭлемБлокировки.ИсточникДанных = ИсточникБлокировки;
	ЭлемБлокировки.ИспользоватьИзИсточникаДанных("Склад", "Склад");
	ЭлемБлокировки.ИспользоватьИзИсточникаДанных("НомерЯчейки", "НомерЯчейки");
	ЭлемБлокировки.Режим = РежимБлокировкиДанных.Исключительный;
	
	Блок.Заблокировать();

	Предупреждение("Установлена блокировка");
	
ЗафиксироватьТранзакцию();
