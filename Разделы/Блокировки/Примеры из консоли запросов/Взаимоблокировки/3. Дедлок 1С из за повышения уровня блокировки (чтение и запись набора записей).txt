// выполнить в параллельно в двух окнах в УПРАВЛЯЕМОМ режиме блокировок
// можно использовать тех. журнал с событиями TLock, TDeadlock для расследования

Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1 Регистратор ИЗ РегистрНакопления.Остаточный");
Выб = Запрос.Выполнить().Выбрать(); Выб.Следующий();

НачатьТранзакцию();

	Набор = РегистрыНакопления.Остаточный.СоздатьНаборЗаписей();
	Набор.Отбор.Регистратор.Установить(Выб.Регистратор);
	
	// 1. разделяемая управляемая блокировка
	Набор.Прочитать();
	Предупреждение("Прочитан набор записей");
	
	// 2. исключительная управляемая блокировка
	Набор.Записать();
	Предупреждение("Записан набор записей");
	
ОтменитьТранзакцию();

	//Блокир = Новый БлокировкаДанных; 
	//ЭлементБлокировки = Блокир.Добавить("РегистрНакопления.Остаточный.НаборЗаписей"); 
	//ЭлементБлокировки.УстановитьЗначение("Регистратор", Выб.Регистратор);
	//ЭлементБлокировки.Режим = РежимБлокировкиДанных.Исключительный;
	//Блокир.Заблокировать(); 
