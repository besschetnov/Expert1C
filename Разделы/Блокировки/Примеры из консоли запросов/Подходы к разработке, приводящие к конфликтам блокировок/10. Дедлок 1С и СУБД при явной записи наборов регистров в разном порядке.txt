// выполнить в двух окнах в управляемом или автоматическом режиме блокировок
// в первом окне записать Набор1, затем Набор2
// во втором окне наоборот - записать Набор2, затем Набор1
//
// проблема может возникнуть, если разработчики конфигурации
// не смогли обеспечить запись наборов в одном и том же порядке 
// при проведении или отмене проведения различных документов

Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1 Ссылка ИЗ Документ.БезТабличныхЧастей"); 
Выб = Запрос.Выполнить().Выбрать(); Выб.Следующий();


Набор1 = РегистрыНакопления.Остаточный.СоздатьНаборЗаписей();
Набор1.Отбор.Регистратор.Установить(Выб.Ссылка);

Набор2 = РегистрыНакопления.Оборотный.СоздатьНаборЗаписей();
Набор2.Отбор.Регистратор.Установить(Выб.Ссылка);


НачатьТранзакцию();

	// шаг 1
	Набор1.Записать(); // исключительная блокировка (Х)
	Предупреждение("Записан Набор1");
	
	// шаг 2
	Набор2.Записать(); // исключительная блокировка (Х)
	Предупреждение("Записан Набор2");
	
ОтменитьТранзакцию();
